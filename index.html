import React, { useState, useEffect, useRef } from "react"

// A new component for the video pop-up modal
const VideoModal = ({ video, onClose, isDark, themeColors }) => {
    // If no video is selected, don't show the modal
    if (!video) return null

    return (
        // Modal overlay
        <div
            style={{
                position: "fixed",
                top: 0,
                left: 0,
                width: "100%",
                height: "100%",
                backgroundColor: isDark
                    ? "rgba(0, 0, 0, 0.9)"
                    : "rgba(0, 0, 0, 0.7)",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                zIndex: 1000, // Ensure it's on top of everything
                padding: "1rem",
                boxSizing: "border-box",
            }}
            onClick={onClose} // Close modal when clicking the backdrop
        >
            {/* Modal content container */}
            <div
                style={{
                    position: "relative",
                    width: "100%",
                    maxWidth: "900px",
                    borderRadius: "0.75rem",
                    overflow: "hidden",
                    backgroundColor: themeColors.bg,
                    boxShadow: `0 8px 30px ${isDark ? "rgba(255, 255, 255, 0.1)" : "rgba(0, 0, 0, 0.3)"}`,
                }}
                onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside the modal
            >
                {/* Close button */}
                <button
                    onClick={onClose}
                    style={{
                        position: "absolute",
                        top: "0.5rem",
                        right: "0.5rem",
                        backgroundColor: "rgba(0, 0, 0, 0.5)",
                        color: "white",
                        borderRadius: "50%",
                        border: "none",
                        width: "30px",
                        height: "30px",
                        fontSize: "1.2rem",
                        cursor: "pointer",
                        zIndex: 1010,
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "center",
                        padding: 0,
                    }}
                >
                    &times;
                </button>
                {/* Video container with a fixed aspect ratio */}
                <div
                    style={{
                        position: "relative",
                        paddingBottom: "56.25%", // 16:9 aspect ratio
                        height: 0,
                    }}
                >
                    <iframe
                        src={`${video.embedUrl}?autoplay=1`}
                        title={video.title}
                        frameBorder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowFullScreen
                        style={{
                            position: "absolute",
                            top: 0,
                            left: 0,
                            width: "100%",
                            height: "100%",
                        }}
                    ></iframe>
                </div>
            </div>
        </div>
    )
}

// Main React Component for the Portfolio Website
export default function App() {
    const [isDark, setIsDark] = useState(true)
    const [lang, setLang] = useState("en")
    const [activeSection, setActiveSection] = useState("home")
    // New state to hold the style of the nav indicator
    const [indicatorStyle, setIndicatorStyle] = useState({})
    // New state for the video modal
    const [showModal, setShowModal] = useState(false)
    const [activeVideo, setActiveVideo] = useState(null)
    // State to control how many projects are visible, starting with 4
    const [visibleCount, setVisibleCount] = useState(4)
    // Ref to measure the projects grid height
    const projectsGridRef = useRef(null)

    const navRefs = {
        home: useRef(null),
        about: useRef(null),
        skills: useRef(null),
        expertise: useRef(null),
        projects: useRef(null),
        contact: useRef(null),
    }

    // Function to handle opening the video modal
    const handleVideoClick = (video) => {
        setActiveVideo(video)
        setShowModal(true)
    }

    // Function to handle closing the video modal
    const handleCloseModal = () => {
        setShowModal(false)
        setActiveVideo(null) // Clear the active video
    }

    // Function to toggle between showing more or less projects
    const toggleProjects = () => {
        if (visibleCount === 4) {
            setVisibleCount(portfolioVideos.length)
        } else {
            setVisibleCount(4)
        }
    }

    // Effect to handle the scrolling and update the active section
    useEffect(() => {
        const handleScroll = () => {
            const sections = [
                "home",
                "about",
                "skills",
                "expertise",
                "projects",
                "contact",
            ]
            let currentSection = ""

            for (const sectionId of sections) {
                const section = document.getElementById(sectionId)
                if (section) {
                    const rect = section.getBoundingClientRect()
                    // Check if the top of the section is within the top 50% of the viewport
                    if (
                        rect.top <= window.innerHeight / 2 &&
                        rect.bottom > window.innerHeight / 2
                    ) {
                        currentSection = sectionId
                        break
                    }
                }
            }

            // Fallback for when the user is at the very top of the page
            if (!currentSection && window.scrollY < window.innerHeight / 2) {
                currentSection = "home"
            }

            if (currentSection) {
                setActiveSection(currentSection)
            }
        }

        window.addEventListener("scroll", handleScroll)
        // Clean up the event listener when the component unmounts
        return () => window.removeEventListener("scroll", handleScroll)
    }, [])

    // Effect to update the indicator's position and size whenever activeSection or lang changes
    useEffect(() => {
        const activeRef = navRefs[activeSection].current
        if (!activeRef) return {}

        // Set the new style for the indicator
        setIndicatorStyle({
            width: activeRef.offsetWidth,
            height: activeRef.offsetHeight,
            left: activeRef.offsetLeft,
            top: activeRef.offsetTop,
            opacity: 1,
            transform: "scale(1)",
        })
    }, [activeSection, lang]) // Add lang to the dependency array

    // Content for both languages
    const content = {
        en: {
            nav: {
                home: "Home",
                about: "About Me",
                skills: "Skills",
                expertise: "Expertise",
                projects: "Projects",
                contact: "Contact",
            },
            hero: {
                title: "Shahab Fotouhian",
                subtitle: "Motion Designer & Video Producer",
                text: "I specialize in creating compelling visual stories through animation and video. With extensive experience in motion graphics and a strong foundation in video production, I bring concepts to life with creativity and technical precision.",
            },
            about: {
                title: "About Me",
                p1: "With a background in Civil Engineering and a passion for visual communication, my career took a creative turn into the world of motion design. For over six years at Verklickern GmbH, I honed my skills in everything from 2D animation and interactive graphics to professional video production and post-production.",
                p2: "I am certified as a Motion Designer and hold a SCRUM Master certification, reflecting my commitment to both artistic excellence and effective project management. Fluent in Farsi, English, and German, I thrive in international, collaborative environments.",
                placeholder: "[Placeholder for your photo]",
            },
            skills: {
                title: "Skills",
                motionGraphics: "Motion Graphics",
                motionGraphicsDesc:
                    "Creating dynamic visual effects and animated content.",
                videoProduction: "Video Production",
                videoProductionDesc:
                    "Filming, drone piloting, and on-set management.",
                storyboarding: "Storyboarding",
                storyboardingDesc:
                    "Visualizing concepts and planning narratives.",
                projectManagement: "Project Management",
                projectManagementDesc: "Agile methodologies and SCRUM.",
                creativeDirection: "Creative Direction",
                creativeDirectionDesc:
                    "Leading projects from concept to completion.",
                postProduction: "Post-Production",
                postProductionDesc: "Editing, color grading, and sound design.",
            },
            expertise: {
                title: "Expertise",
                afterEffects: "Adobe After Effects",
                afterEffectsDesc:
                    "Advanced motion graphics, VFX, and compositing.",
                premierePro: "Adobe Premiere Pro",
                premiereProDesc:
                    "Professional video editing and color correction.",
                illustrator: "Adobe Illustrator",
                illustratorDesc:
                    "Vector graphics and illustration for animation.",
                photoshop: "Adobe Photoshop",
                photoshopDesc:
                    "Image manipulation, compositing, and digital painting.",
                audition: "Adobe Audition",
                auditionDesc: "Audio editing and sound design.",
                cinema4d: "Maxon Cinema 4D",
                cinema4dDesc: "3D modeling and animation.",
                davinciResolve: "DaVinci Resolve",
                davinciResolveDesc: "High-end color grading and finishing.",
                blender: "Blender",
                blenderDesc: "3D modeling, sculpting, and rendering.",
                figma: "Figma",
                figmaDesc: "UI/UX design and interactive prototyping.",
                substancePainter: "Substance Painter",
                substancePainterDesc:
                    "3D texture painting and material creation.",
                zbrush: "ZBrush",
                zbrushDesc: "Digital sculpting.",
                lightroom: "Adobe Lightroom",
                lightroomDesc: "Image editing and photo management.",
            },
            projects: {
                title: "My Projects",
                showMore: "Show more projects",
                showLess: "Show less projects",
            },
            contact: {
                title: "Let's Connect",
                text: "I am always open to new projects and collaborations. Feel free to get in touch!",
                button: "View Full Portfolio",
            },
        },
        de: {
            nav: {
                home: "Startseite",
                about: "Über mich",
                skills: "Fähigkeiten",
                expertise: "Kompetenzen",
                projects: "Projekte",
                contact: "Kontakt",
            },
            hero: {
                title: "Shahab Fotouhian",
                subtitle: "Motion Designer & Videoproduzent",
                text: "Ich bin darauf spezialisiert, fesselnde visuelle Geschichten durch Animation und Video zu schaffen. Mit umfassender Erfahrung in Motion Graphics und einer solider Grundlage in der Videoproduktion erwecke ich Konzepte mit Kreativität und technischer Präzision zum Leben.",
            },
            about: {
                title: "Über mich",
                p1: "Mit einem Hintergrund im Bauingenieurwesen und einer Leidenschaft für visuelle Kommunikation hat meine Karriere eine kreative Wende in die Welt des Motion Designs genommen. In über sechs Jahren der Verklickern GmbH habe ich meine Fähigkeiten in allen Bereichen, von 2D-Animation und interaktiven Grafiken bis hin zu professioneller Videoproduktion und Postproduktion, verfeinert.",
                p2: "Ich bin als Motion Designer zertifiziert und verfüge über eine SCRUM Master-Zertifizierung, was mein Engagement für künstlerische Exzellenz und effektives Projektmanagement widerspiegelt. Fließend in Persisch, Englisch und Deutsch, fühle ich mich in internationalen, kollaborativen Umgebungen wohl.",
                placeholder: "[Platzhalter für Ihr Foto]",
            },
            skills: {
                title: "Fähigkeiten",
                motionGraphics: "Motion Graphics",
                motionGraphicsDesc:
                    "Erstellung von dynamischen visuellen Effekten und animierten Inhalten.",
                videoProduction: "Videoproduktion",
                videoProductionDesc:
                    "Filmen, Drohnen-Steuerung und On-Set-Management.",
                storyboarding: "Storyboard-Erstellung",
                storyboardingDesc:
                    "Visualisierung von Konzepten und Planung von Erzählungen.",
                projectManagement: "Projektmanagement",
                projectManagementDesc: "Agile Methodologien und SCRUM.",
                creativeDirection: "Kreative Leitung",
                creativeDirectionDesc:
                    "Führung von Projekten vom Konzept bis zur Fertigstellung.",
                postProduction: "Postproduktion",
                postProductionDesc: "Schnitt, Farbkorrektur und Sounddesign.",
            },
            expertise: {
                title: "Kompetenzen",
                afterEffects: "Adobe After Effects",
                afterEffectsDesc:
                    "Fortgeschrittene Motion Graphics, VFX und Compositing.",
                premierePro: "Adobe Premiere Pro",
                premiereProDesc:
                    "Professioneller Videoschnitt und Farbkorrektur.",
                illustrator: "Adobe Illustrator",
                illustratorDesc:
                    "Vektorgrafiken und Illustrationen für Animationen.",
                photoshop: "Adobe Photoshop",
                photoshopDesc:
                    "Bildbearbeitung, Compositing und digitales Malen.",
                audition: "Adobe Audition",
                auditionDesc: "Audiobearbeitung und Sounddesign.",
                cinema4d: "Maxon Cinema 4D",
                cinema4dDesc: "3D-Modellierung und Animation.",
                davinciResolve: "DaVinci Resolve",
                davinciResolveDesc: "Hochwertige Farbkorrektur und Finishing.",
                blender: "Blender",
                blenderDesc: "3D-Modellierung, Sculpting und Rendering.",
                figma: "Figma",
                figmaDesc: "UI/UX-Design und interaktives Prototyping.",
                substancePainter: "Substance Painter",
                substancePainterDesc:
                    "3D-Texturbemalung und Materialerstellung.",
                zbrush: "ZBrush",
                zbrushDesc: "Digitales Sculpting.",
                lightroom: "Adobe Lightroom",
                lightroomDesc: "Image editing and photo management.",
            },
            projects: {
                title: "My Projects",
                showMore: "Show more projects",
                showLess: "Show less projects",
            },
            contact: {
                title: "Let's Connect",
                text: "I am always open to new projects and collaborations. Feel free to get in touch!",
                button: "View Full Portfolio",
            },
        },
    }

    // Placeholder data for your portfolio videos
    const portfolioVideos = [
        {
            title: "Project 1",
            url: "https://youtu.be/O8RsvUra8JE",
            embedUrl: "https://www.youtube.com/embed/O8RsvUra8JE",
        },
        {
            title: "Project 2",
            url: "https://youtu.be/AAKkb9oXCss",
            embedUrl: "https://www.youtube.com/embed/AAKkb9oXCss",
        },
        {
            title: "Project 3",
            url: "https://youtu.be/y4LTPeOgeS0",
            embedUrl: "https://www.youtube.com/embed/y4LTPeOgeS0",
        },
        {
            title: "Project 4",
            url: "https://youtu.be/wI8QYzj-phk",
            embedUrl: "https://www.youtube.com/embed/wI8QYzj-phk",
        },
        {
            title: "Project 5",
            url: "https://youtu.be/lOnX6pUKkbA",
            embedUrl: "https://www.youtube.com/embed/lOnX6pUKkbA",
        },
        {
            title: "Project 6",
            url: "https://youtu.be/wJIEdg1CGns",
            embedUrl: "https://www.youtube.com/embed/wJIEdg1CGns",
        },
        {
            title: "Project 7",
            url: "https://youtu.be/nq-nnNSeQbo",
            embedUrl: "https://www.youtube.com/embed/nq-nnNSeQbo",
        },
        {
            title: "Project 8",
            url: "https://youtu.be/rrMwJjRxb9E",
            embedUrl: "https://www.youtube.com/embed/rrMwJjRxb9E",
        },
        {
            title: "Project 9",
            url: "https://youtu.be/j-AUGz2xvLU",
            embedUrl: "https://www.youtube.com/embed/j-AUGz2xvLU",
        },
        {
            title: "Project 10",
            url: "https://youtu.be/3K6otI9MAko",
            embedUrl: "https://www.youtube.com/embed/3K6otI9MAko",
        },
        {
            title: "Project 11",
            url: "https://youtu.be/xWCdD5Cz3Q8",
            embedUrl: "https://www.youtube.com/embed/xWCdD5Cz3Q8",
        },
        {
            title: "Project 12",
            url: "https://youtu.be/dmPcSstXA4I",
            embedUrl: "https://www.youtube.com/embed/dmPcSstXA4I",
        },
        {
            title: "Project 13",
            url: "https://youtu.be/3HvT7U71cpA",
            embedUrl: "https://www.youtube.com/embed/3HvT7U71cpA",
        },
        {
            title: "Project 14",
            url: "https://youtu.be/brM7I-4KY0g",
            embedUrl: "https://www.youtube.com/embed/brM7I-4KY0g",
        },
        {
            title: "Project 15",
            url: "https://youtu.be/UPBK_LGcslQ",
            embedUrl: "https://www.youtube.com/embed/UPBK_LGcslQ",
        },
        {
            title: "Project 16",
            url: "https://youtu.be/7o9G9ZfWRw4",
            embedUrl: "https://www.youtube.com/embed/7o9G9ZfWRw4",
        },
        {
            title: "Project 17",
            url: "https://youtu.be/Kzz9EvZynwc",
            embedUrl: "https://www.youtube.com/embed/Kzz9EvZynwc",
        },
        {
            title: "Project 18",
            url: "https://youtu.be/7aokYsmPVkg",
            embedUrl: "https://www.youtube.com/embed/7aokYsmPVkg",
        },
        {
            title: "Project 19",
            url: "https://youtu.be/pCm0wXebzMk",
            embedUrl: "https://www.youtube.com/embed/pCm0wXebzMk",
        },
        {
            title: "Project 20",
            url: "https://youtu.be/yn_64XKkw6c",
            embedUrl: "https://www.youtube.com/embed/yn_64XKkw6c",
        },
        {
            title: "Project 21",
            url: "https://youtu.be/gddztaVql3Q",
            embedUrl: "https://www.youtube.com/embed/gddztaVql3Q",
        },
        {
            title: "Project 22",
            url: "https://youtu.be/a0xRb27LRKs",
            embedUrl: "https://www.youtube.com/embed/a0xRb27LRKs",
        },
    ]

    // Define colors for both modes
    const themeColors = isDark
        ? {
              bg: "#333333",
              text: "#cbd5e1",
              textSecondary: "#94a3b8",
              // Changed the textAccent color from cyan to the navigation bar's orange
              textAccent: "#f94706",
              sectionBg: "#1e1e1e",
              border: "#334155",
              accent1: "#f94706", // Also updated other accents for consistency
              accent2: "#f97316",
              accent3: "#ffbe6b",
              buttonBg: "#f94706",
              buttonText: "#000000",
              buttonHover: "#ffbe6b",
              navBg: "#333333", // New nav background color
              navText: "#B3B3B3", // New nav text color
              navActiveText: "#ffffff", // New nav active text color
              navShadow: "0 4px 6px rgba(255, 255, 255, 0.05)",
              thumbShadow: "0 0 10px rgba(255, 255, 255, 0.15)", // Thin blurred shadow for dark mode
              buttonShadow: "0 4px 6px rgba(255, 255, 255, 0.05)", // New button shadow for dark mode
          }
        : {
              bg: "#E7E7E7",
              text: "#1e293b",
              textSecondary: "#475569",
              // Changed the textAccent color from cyan to a bright orange for light mode
              textAccent: "#f97316",
              sectionBg: "#f1f5f9",
              border: "#e2e8f0",
              accent1: "#f97316",
              accent2: "#f97316",
              accent3: "#fbbf24",
              buttonBg: "#f97316",
              buttonText: "#ffffff",
              buttonHover: "#ea580c",
              navBg: "#ffffff", // New nav background color
              navText: "#1e293b", // New nav text color
              navActiveText: "#1e293b", // Active text is the same as normal in light mode
              navShadow: "0 4px 6px rgba(0, 0, 0, 0.1)",
              thumbShadow: "0 0 10px rgba(0, 0, 0, 0.15)", // Thin blurred shadow for light mode
              buttonShadow: "0 4px 6px rgba(0, 0, 0, 0.1)", // New button shadow for light mode
          }

    // New SVG icons for theme toggle (Moon and Star)
    const MoonIcon = () => (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            style={{ width: "20px", height: "20px", color: "#ffbe6b" }}
        >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </svg>
    )

    const SunIcon = () => (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            style={{ width: "20px", height: "20px", color: "#fbbf24" }}
        >
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
    )

    // Play button SVG icon
    const PlayIcon = () => (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="64"
            height="64"
            viewBox="0 0 24 24"
            fill="white"
            opacity="0.8"
        >
            <path d="M8 5v14l11-7z" />
        </svg>
    )

    // SVG icon for the down arrow
    const ArrowDownIcon = () => (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            style={{
                verticalAlign: "middle",
                marginLeft: "0.5rem",
                width: "1rem",
                height: "1rem",
            }}
        >
            <path d="M12 5v14m7-7-7 7-7-7" />
        </svg>
    )

    // SVG icon for the up arrow
    const ArrowUpIcon = () => (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            style={{
                verticalAlign: "middle",
                marginLeft: "0.5rem",
                width: "1rem",
                height: "1rem",
            }}
        >
            <path d="M12 19V5m-7 7 7-7 7 7" />
        </svg>
    )

    return (
        <div
            className={
                isDark
                    ? "page-container dark-mode"
                    : "page-container light-mode"
            }
            style={{
                backgroundColor: themeColors.bg,
                color: themeColors.text,
                transition: "background-color 0.5s, color 0.5s",
                fontFamily: "Inter, sans-serif",
                scrollBehavior: "smooth",
            }}
        >
            <style>
                {`
                    .page-container {
                        min-height: 100vh;
                        width: 100vw;
                        overflow-x: hidden;
                    }

                    .content-wrapper {
                        max-width: 1280px;
                        margin: 0 auto;
                        padding: 1.5rem;
                        padding-top: 6rem;
                        box-sizing: border-box;
                    }

                    @media (min-width: 768px) {
                        .content-wrapper {
                            padding: 2.5rem;
                            padding-top: 6rem;
                        }
                    }

                    /* New hover effect styles for nav links */
                    .nav-link {
                        position: relative; /* Needed for positioning the pseudo-element */
                        transition: color 0.3s;
                        text-decoration: none;
                        white-space: nowrap;
                    }

                    .nav-link::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        border-radius: 9999px;
                        z-index: -1;
                        opacity: 0;
                        transition: opacity 0.3s ease, background-color 0.3s ease;
                    }

                    .dark-mode .nav-link:hover::before {
                        background-color: rgba(255, 255, 255, 0.1); /* Lighter grey for dark mode */
                        opacity: 1;
                    }

                    .light-mode .nav-link:hover::before {
                        background-color: rgba(0, 0, 0, 0.05); /* Lighter grey for light mode */
                        opacity: 1;
                    }

                    /* End of new hover effect styles */

                    .toggle-switch-container {
                        display: flex;
                        flex-direction: column; /* Changed to column */
                        gap: 1rem;
                    }
                    /* Updated button dimensions for better spacing */
                    .toggle-switch {
                        position: relative;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 78px; /* Increased width */
                        height: 40px; /* Increased height */
                        padding: 3px;
                        border-radius: 9999px;
                        cursor: pointer;
                        transition: background-color 0.3s, border-color 0.3s;
                        border: 1px solid;
                    }

                    /* Updated thumb dimensions to fit within the larger switch */
                    .toggle-switch-thumb {
                        position: absolute;
                        width: 34px;
                        height: 34px;
                        background-color: white;
                        border-radius: 50%;
                        transition: transform 0.3s ease-in-out;
                        z-index: 1; /* Thumb is now behind the content */
                    }

                    /* Language text and icons are centered vertically and always on top */
                    .toggle-inner-container {
                        position: relative;
                        z-index: 2; /* Icons and text are on top */
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                        padding: 0 4px; /* Added horizontal padding to align with thumb movement */
                        box-sizing: border-box; /* Ensures padding is included in width */
                    }

                    .language-text {
                        z-index: 2;
                        position: relative;
                        font-size: 0.9rem;
                        font-weight: bold;
                        transition: color 0.3s;
                    }

                    .project-buttons {
                        display: flex;
                        justify-content: center;
                        gap: 1rem;
                        margin-top: 2rem;
                    }

                    .show-button {
                        display: inline-block;
                        font-weight: bold;
                        padding: 0.75rem 2rem;
                        border-radius: 9999px;
                        transition: background-color 0.3s, transform 0.2s;
                        border: none;
                        cursor: pointer;
                        text-decoration: none;
                        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                        text-align: center;
                    }

                    .show-button:hover {
                        transform: translateY(-2px);
                    }

                    /* Styles for the animated grid container */
                    .animated-grid-container {
                        overflow: hidden;
                        transition: height 0.5s ease;
                    }

                    /* Styles for the animated grid items */
                    .animated-grid-item {
                        opacity: 0;
                        transform: translateY(20px);
                        transition: opacity 0.5s ease, transform 0.5s ease;
                    }

                    .animated-grid-item.visible {
                        opacity: 1;
                        transform: translateY(0);
                    }

                `}
            </style>

            {/* Fixed Header with centered Navigation */}
            <div
                style={{
                    position: "fixed",
                    top: "1rem",
                    left: "1rem",
                    right: "1rem",
                    zIndex: "100",
                    display: "flex",
                    justifyContent: "space-between",
                    alignItems: "center",
                    padding: "0 1rem",
                }}
            >
                {/* Fixed Buttons at the top left */}
                <div
                    style={{
                        display: "flex",
                        flexDirection: "column",
                        gap: "1rem",
                    }}
                >
                    {/* Theme Toggle Switch */}
                    <div
                        onClick={() => setIsDark(!isDark)}
                        className="toggle-switch"
                        style={{
                            backgroundColor: isDark ? "#4f46e5" : "#6366f1",
                            borderColor: isDark ? "#3730a3" : "#4338ca",
                            boxShadow: themeColors.buttonShadow,
                            padding: "0",
                            justifyContent: "start",
                        }}
                    >
                        <div
                            className="toggle-switch-thumb"
                            style={{
                                transform: isDark
                                    ? "translateX(38px)"
                                    : "translateX(3px)",
                                boxShadow: themeColors.thumbShadow,
                                display: "flex",
                                alignItems: "center",
                                justifyContent: "center",
                            }}
                        >
                            {isDark ? <MoonIcon /> : <SunIcon />}
                        </div>
                    </div>

                    {/* Language Toggle Switch */}
                    <div
                        onClick={() => setLang(lang === "en" ? "de" : "en")}
                        className="toggle-switch"
                        style={{
                            backgroundColor:
                                lang === "en" ? "#f97316" : "#f97316",
                            borderColor: lang === "en" ? "#ea580c" : "#ea580c",
                            boxShadow: themeColors.buttonShadow,
                        }}
                    >
                        <div
                            className="toggle-switch-thumb"
                            style={{
                                transform:
                                    lang === "en"
                                        ? "translateX(0)"
                                        : "translateX(36px)",
                                boxShadow: themeColors.thumbShadow,
                                left: "3px",
                            }}
                        ></div>
                        <div className="toggle-inner-container">
                            <span
                                className="language-text"
                                style={{
                                    // Updated language text colors
                                    color:
                                        lang === "en"
                                            ? "rgba(0, 0, 0, 0.5)"
                                            : "rgba(0, 0, 0, 0.3)",
                                }}
                            >
                                EN
                            </span>
                            <span
                                className="language-text"
                                style={{
                                    // Updated language text colors
                                    color:
                                        lang === "en"
                                            ? "rgba(0, 0, 0, 0.3)"
                                            : "rgba(0, 0, 0, 0.5)",
                                }}
                            >
                                DE
                            </span>
                        </div>
                    </div>
                </div>

                {/* Centered Navigation Bar */}
                <nav
                    style={{
                        position: "fixed",
                        top: "1rem",
                        left: "50%",
                        transform: "translateX(-50%)",
                        zIndex: "100",
                        display: "flex",
                        gap: "1rem",
                        backgroundColor: themeColors.navBg,
                        padding: "0.5rem",
                        borderRadius: "9999px",
                        border: "none",
                        boxShadow: themeColors.navShadow,
                    }}
                >
                    {/* The moving orange background indicator */}
                    <div
                        style={{
                            position: "absolute",
                            backgroundColor: "#f94706",
                            borderRadius: "9999px",
                            transition:
                                "width 0.3s ease, left 0.3s ease, top 0.3s ease, height 0.3s ease, transform 0.3s ease",
                            opacity: 0,
                            transform: "scale(0)",
                            ...indicatorStyle, // Use the new state for the style
                        }}
                    />
                    <a
                        ref={navRefs.home}
                        href="#home"
                        onClick={() => setActiveSection("home")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "home"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.home}
                    </a>
                    <a
                        ref={navRefs.about}
                        href="#about"
                        onClick={() => setActiveSection("about")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "about"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.about}
                    </a>
                    <a
                        ref={navRefs.skills}
                        href="#skills"
                        onClick={() => setActiveSection("skills")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "skills"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.skills}
                    </a>
                    <a
                        ref={navRefs.expertise}
                        href="#expertise"
                        onClick={() => setActiveSection("expertise")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "expertise"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.expertise}
                    </a>
                    <a
                        ref={navRefs.projects}
                        href="#projects"
                        onClick={() => setActiveSection("projects")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "projects"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.projects}
                    </a>
                    <a
                        ref={navRefs.contact}
                        href="#contact"
                        onClick={() => setActiveSection("contact")}
                        className="nav-link"
                        style={{
                            position: "relative",
                            zIndex: 10,
                            padding: "0.5rem 1rem",
                            borderRadius: "9999px",
                            color:
                                activeSection === "contact"
                                    ? themeColors.navActiveText
                                    : themeColors.navText,
                            transition: "color 0.3s",
                            textDecoration: "none",
                            whiteSpace: "nowrap", // Ensure text stays on one line
                        }}
                    >
                        {content[lang].nav.contact}
                    </a>
                </nav>
            </div>

            {/* Content Wrapper for all sections */}
            <div className="content-wrapper">
                {/* Home Section */}
                <header
                    id="home"
                    style={{
                        minHeight: "75vh",
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "center",
                        flexDirection: "column",
                        textAlign: "center",
                        paddingBottom: "3rem",
                        paddingTop: "6rem",
                    }}
                >
                    <h1
                        style={{
                            fontSize: "2.25rem",
                            fontWeight: "800",
                            color: themeColors.textAccent,
                            marginBottom: "1rem",
                            // Removed the text glow effect
                            "@media (min-width: 768px)": {
                                fontSize: "3.75rem",
                            },
                        }}
                    >
                        {content[lang].hero.title}
                    </h1>
                    <h2
                        style={{
                            fontSize: "1.25rem",
                            fontWeight: "bold",
                            color: themeColors.text,
                            marginBottom: "2rem",
                        }}
                    >
                        {content[lang].hero.subtitle}
                    </h2>
                    <p
                        style={{
                            maxWidth: "4xl",
                            fontSize: "1rem",
                            lineHeight: "1.75rem",
                            color: themeColors.textSecondary,
                            "@media (min-width: 768px)": {
                                fontSize: "1.125rem",
                            },
                        }}
                    >
                        {content[lang].hero.text}
                    </p>
                </header>

                {/* About Section */}
                <section
                    id="about"
                    style={{
                        backgroundColor: themeColors.sectionBg,
                        padding: "3rem",
                        borderRadius: "0.75rem",
                        marginBottom: "2rem",
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        boxShadow: `0 0 10px ${isDark ? "rgba(0,0,0,0.5)" : "rgba(0,0,0,0.1)"}`,
                    }}
                >
                    <h2
                        style={{
                            fontSize: "2rem",
                            fontWeight: "bold",
                            marginBottom: "1.5rem",
                            color: themeColors.text,
                            textAlign: "center",
                        }}
                    >
                        {content[lang].about.title}
                    </h2>
                    <div
                        style={{
                            display: "flex",
                            flexDirection: "column",
                            gap: "2rem",
                            alignItems: "center",
                            "@media (min-width: 768px)": {
                                flexDirection: "row",
                                gap: "4rem",
                            },
                        }}
                    >
                        <div
                            style={{
                                width: "250px",
                                height: "250px",
                                backgroundColor: themeColors.border,
                                borderRadius: "0.5rem",
                                flexShrink: 0,
                                display: "flex",
                                alignItems: "center",
                                justifyContent: "center",
                                color: themeColors.textSecondary,
                                fontStyle: "italic",
                            }}
                        >
                            {content[lang].about.placeholder}
                        </div>
                        <div
                            style={{
                                flexGrow: 1,
                                textAlign: "center",
                                "@media (min-width: 768px)": {
                                    textAlign: "left",
                                },
                            }}
                        >
                            <p
                                style={{
                                    marginBottom: "1rem",
                                    lineHeight: "1.75rem",
                                    color: themeColors.text,
                                }}
                            >
                                {content[lang].about.p1}
                            </p>
                            <p
                                style={{
                                    lineHeight: "1.75rem",
                                    color: themeColors.text,
                                }}
                            >
                                {content[lang].about.p2}
                            </p>
                        </div>
                    </div>
                </section>

                {/* Skills Section */}
                <section
                    id="skills"
                    style={{
                        backgroundColor: themeColors.sectionBg,
                        padding: "3rem",
                        borderRadius: "0.75rem",
                        marginBottom: "2rem",
                        boxShadow: `0 0 10px ${isDark ? "rgba(0,0,0,0.5)" : "rgba(0,0,0,0.1)"}`,
                    }}
                >
                    <h2
                        style={{
                            fontSize: "2rem",
                            fontWeight: "bold",
                            marginBottom: "2rem",
                            color: themeColors.text,
                            textAlign: "center",
                        }}
                    >
                        {content[lang].skills.title}
                    </h2>
                    <div
                        style={{
                            display: "grid",
                            gridTemplateColumns:
                                "repeat(auto-fit, minmax(250px, 1fr))",
                            gap: "1.5rem",
                        }}
                    >
                        {Object.entries(content[lang].skills).map(
                            ([key, value]) => {
                                if (key.endsWith("Desc") || key === "title") {
                                    return null
                                }
                                return (
                                    <div
                                        key={key}
                                        style={{
                                            padding: "1.5rem",
                                            backgroundColor: themeColors.bg,
                                            borderRadius: "0.5rem",
                                            boxShadow: `0 4px 6px ${isDark ? "rgba(0,0,0,0.2)" : "rgba(0,0,0,0.1)"}`,
                                            border: "none", // Removed the border
                                        }}
                                    >
                                        <h3
                                            style={{
                                                fontSize: "1.125rem",
                                                fontWeight: "bold",
                                                color: themeColors.text,
                                                marginBottom: "0.5rem",
                                            }}
                                        >
                                            {value}
                                        </h3>
                                        <p
                                            style={{
                                                fontSize: "0.875rem",
                                                color: themeColors.textSecondary,
                                            }}
                                        >
                                            {content[lang].skills[key + "Desc"]}
                                        </p>
                                    </div>
                                )
                            }
                        )}
                    </div>
                </section>

                {/* Expertise Section */}
                <section
                    id="expertise"
                    style={{
                        backgroundColor: themeColors.sectionBg,
                        padding: "3rem",
                        borderRadius: "0.75rem",
                        marginBottom: "2rem",
                        boxShadow: `0 0 10px ${isDark ? "rgba(0,0,0,0.5)" : "rgba(0,0,0,0.1)"}`,
                    }}
                >
                    <h2
                        style={{
                            fontSize: "2rem",
                            fontWeight: "bold",
                            marginBottom: "2rem",
                            color: themeColors.text,
                            textAlign: "center",
                        }}
                    >
                        {content[lang].expertise.title}
                    </h2>
                    <div
                        style={{
                            display: "grid",
                            gridTemplateColumns:
                                "repeat(auto-fit, minmax(250px, 1fr))",
                            gap: "1.5rem",
                        }}
                    >
                        {Object.entries(content[lang].expertise).map(
                            ([key, value]) => {
                                if (key.endsWith("Desc") || key === "title") {
                                    return null
                                }
                                return (
                                    <div
                                        key={key}
                                        style={{
                                            padding: "1.5rem",
                                            backgroundColor: themeColors.bg,
                                            borderRadius: "0.5rem",
                                            boxShadow: `0 4px 6px ${isDark ? "rgba(0,0,0,0.2)" : "rgba(0,0,0,0.1)"}`,
                                            border: "none", // Removed the border
                                        }}
                                    >
                                        <h3
                                            style={{
                                                fontSize: "1.125rem",
                                                fontWeight: "bold",
                                                color: themeColors.text,
                                                marginBottom: "0.5rem",
                                            }}
                                        >
                                            {value}
                                        </h3>
                                        <p
                                            style={{
                                                fontSize: "0.875rem",
                                                color: themeColors.textSecondary,
                                            }}
                                        >
                                            {
                                                content[lang].expertise[
                                                    key + "Desc"
                                                ]
                                            }
                                        </p>
                                    </div>
                                )
                            }
                        )}
                    </div>
                </section>

                {/* Projects Section */}
                <section
                    id="projects"
                    style={{
                        backgroundColor: themeColors.sectionBg,
                        padding: "3rem",
                        borderRadius: "0.75rem",
                        marginBottom: "2rem",
                        boxShadow: `0 0 10px ${isDark ? "rgba(0,0,0,0.5)" : "rgba(0,0,0,0.1)"}`,
                    }}
                >
                    <h2
                        style={{
                            fontSize: "2rem",
                            fontWeight: "bold",
                            marginBottom: "2rem",
                            color: themeColors.text,
                            textAlign: "center",
                        }}
                    >
                        {content[lang].projects.title}
                    </h2>
                    {/* Container for the animated grid */}
                    <div
                        className="animated-grid-container"
                        ref={projectsGridRef}
                    >
                        <div
                            style={{
                                display: "grid",
                                gap: "2rem",
                                // Updated the grid layout to be responsive
                                gridTemplateColumns:
                                    "repeat(auto-fit, minmax(250px, 1fr))",
                            }}
                        >
                            {/* Map over the projects to render them */}
                            {portfolioVideos
                                .slice(0, visibleCount)
                                .map((video, index) => (
                                    <div
                                        key={index}
                                        className={`animated-grid-item visible`}
                                        style={{
                                            backgroundColor: themeColors.bg,
                                            padding: "1rem",
                                            borderRadius: "0.5rem",
                                            boxShadow: `0 4px 6px ${isDark ? "rgba(0,0,0,0.2)" : "rgba(0,0,0,0.1)"}`,
                                            border: "none", // Removed the border
                                            cursor: "pointer",
                                        }}
                                        onClick={() => handleVideoClick(video)}
                                    >
                                        <div
                                            style={{
                                                position: "relative",
                                                paddingBottom: "56.25%",
                                                height: 0,
                                                marginBottom: "0.5rem",
                                                borderRadius: "0.25rem",
                                                overflow: "hidden",
                                                backgroundImage: `url(https://img.youtube.com/vi/${video.embedUrl.split("/").pop()}/maxresdefault.jpg)`,
                                                backgroundSize: "cover",
                                                backgroundPosition: "center",
                                                display: "flex",
                                                alignItems: "center",
                                                justifyContent: "center",
                                            }}
                                        >
                                            <div
                                                style={{
                                                    position: "absolute",
                                                    top: 0,
                                                    left: 0,
                                                    width: "100%",
                                                    height: "100%",
                                                    backgroundColor:
                                                        "rgba(0, 0, 0, 0.4)",
                                                    display: "flex",
                                                    alignItems: "center",
                                                    justifyContent: "center",
                                                    transition:
                                                        "background-color 0.3s",
                                                }}
                                                onMouseEnter={(e) =>
                                                    (e.currentTarget.style.backgroundColor =
                                                        "rgba(0, 0, 0, 0.6)")
                                                }
                                                onMouseLeave={(e) =>
                                                    (e.currentTarget.style.backgroundColor =
                                                        "rgba(0, 0, 0, 0.4)")
                                                }
                                            >
                                                <PlayIcon />
                                            </div>
                                        </div>
                                        <h3
                                            style={{
                                                fontSize: "1rem",
                                                fontWeight: "bold",
                                                color: themeColors.text,
                                                textAlign: "center",
                                            }}
                                        >
                                            {video.title}
                                        </h3>
                                    </div>
                                ))}
                        </div>
                    </div>

                    {/* The buttons for showing more or less projects */}
                    <div className="project-buttons">
                        {visibleCount < portfolioVideos.length ? (
                            <button
                                onClick={toggleProjects}
                                className="show-button"
                                style={{
                                    backgroundColor: themeColors.buttonBg,
                                    color: themeColors.buttonText,
                                    boxShadow: themeColors.buttonShadow,
                                }}
                            >
                                {content[lang].projects.showMore}
                                <ArrowDownIcon />
                            </button>
                        ) : (
                            <button
                                onClick={toggleProjects}
                                className="show-button"
                                style={{
                                    backgroundColor: themeColors.buttonBg,
                                    color: themeColors.buttonText,
                                    boxShadow: themeColors.buttonShadow,
                                }}
                            >
                                {content[lang].projects.showLess}
                                <ArrowUpIcon />
                            </button>
                        )}
                    </div>
                </section>

                {/* Contact Section */}
                <footer
                    id="contact"
                    style={{
                        backgroundColor: themeColors.sectionBg,
                        padding: "3rem",
                        borderRadius: "0.75rem",
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        textAlign: "center",
                        boxShadow: `0 0 10px ${isDark ? "rgba(0,0,0,0.5)" : "rgba(0,0,0,0.1)"}`,
                    }}
                >
                    <h2
                        style={{
                            fontSize: "2rem",
                            fontWeight: "bold",
                            marginBottom: "1rem",
                            color: themeColors.text,
                        }}
                    >
                        {content[lang].contact.title}
                    </h2>
                    <p
                        style={{
                            fontSize: "1rem",
                            lineHeight: "1.75rem",
                            marginBottom: "1.5rem",
                            color: themeColors.textSecondary,
                        }}
                    >
                        {content[lang].contact.text}
                    </p>
                    <div
                        style={{
                            display: "flex",
                            flexDirection: "column",
                            gap: "0.5rem",
                            color: themeColors.text,
                            marginBottom: "2rem",
                        }}
                    >
                        <p
                            style={{
                                fontSize: "1rem",
                                "@media (min-width: 768px)": {
                                    fontSize: "1.125rem",
                                },
                            }}
                        >
                            +49 176 34 42 5050
                        </p>
                        <p
                            style={{
                                fontSize: "1rem",
                                "@media (min-width: 768px)": {
                                    fontSize: "1.125rem",
                                },
                            }}
                        >
                            s.fotouhian@gmail.com
                        </p>
                    </div>
                    <a
                        href="https://shahab-studio.framer.ai/"
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{
                            marginTop: "2rem",
                            display: "inline-block",
                            fontWeight: "bold",
                            padding: "0.75rem 2rem",
                            borderRadius: "9999px",
                            transition: "background-color 0.3s",
                            backgroundColor: themeColors.buttonBg,
                            color: themeColors.buttonText,
                        }}
                    >
                        {content[lang].contact.button}
                    </a>
                </footer>
            </div>

            {/* Conditional rendering of the modal */}
            {showModal && (
                <VideoModal
                    video={activeVideo}
                    onClose={handleCloseModal}
                    isDark={isDark}
                    themeColors={themeColors}
                />
            )}
        </div>
    )
}
